# Python API Autotests with Pytest | –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –Ω–∞ Python  

![Python](https://img.shields.io/badge/Python-3.8%2B-3776AB?logo=python&logoColor=white)
![Pytest](https://img.shields.io/badge/Pytest-Test%20Framework-0A9EDC?logo=pytest&logoColor=white)
![API](https://img.shields.io/badge/API-REST%20Testing-FF6F61?logo=postman&logoColor=white)
![Automation](https://img.shields.io/badge/Automation-100%25-00CC00?logo=automation&logoColor=white)

üêç --- üêç

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ë—ã—Å—Ç—Ä—ã–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã  
- üìä **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ
- üèó **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –õ–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–¥–∞
- üîß **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –õ–µ–≥–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã
- üìù **–î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** - –ü–æ–Ω—è—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üõ° **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –í–µ—Ä—Å–∏—è |
|------------|------------|---------|
| **Python** | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è | 3.8+ |
| **Pytest** | –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | 7.4+ |
| **Requests** | HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ | 2.31+ |
| **JSON** | –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è | - |
| **Fixtures** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤ | - |
| **Parametrize** | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | - |

üêç --- üêç

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Python_Autotest_Api_Pytest/
‚îú‚îÄ‚îÄ üìÇ tests/                          # –ü–∞–ø–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ üêç __init__.py                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è conftest.py                 # –§–∏–∫—Å—Ç—É—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Pytest
‚îÇ   ‚îú‚îÄ‚îÄ üß™ test_trainers.py            # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ üìã static_bodies.py            # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ üîê auth_data.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API (—Ç–æ–∫–µ–Ω—ã, URL)
‚îú‚îÄ‚îÄ üìñ README.md                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ üóëÔ∏è .gitignore                      # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
```

### üìã –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:
- **`conftest.py`** - –§–∏–∫—Å—Ç—É—Ä—ã Pytest –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –¥–∞–Ω–Ω—ã–º–∏
- **`test_trainers.py`** - –¢–µ—Å—Ç—ã –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ /trainers (GET, PUT, PATCH)
- **`static_bodies.py`** - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **`auth_data.py`** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API (—Ç–æ–∫–µ–Ω, URL, headers)
---
## üéØ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### üîß –§–∏–∫—Å—Ç—É—Ä–∞ API –∫–ª–∏–µ–Ω—Ç–∞
```python
@pytest.fixture
def api_client(base_url, headers):
    class APIClient:
        def get(self, endpoint, **kwargs):
            return requests.get(f"{self.base_url}{endpoint}", headers=self.headers, **kwargs)
    return APIClient(base_url, headers)
```
### üìä –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```python
@pytest.mark.parametrize("endpoint", [
    "/trainers",
    "/trainers?limit=5", 
    "/trainers?page=1"
])
def test_status_code(api_client, endpoint):
    response = api_client.get(endpoint)
    assert response.status_code == 200
```
### üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–µ—Ä–∞
```python
@pytest.mark.parametrize("test_id,expected_name", [
    (39589, "Ash")
])
def test_trainer_by_id(api_client, test_id, expected_name):
    response = api_client.get('/trainers', params={'trainer_id': test_id})
    trainer = response.json()["data"][0]
    assert trainer["trainer_name"] == expected_name
```
### üìã –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```python
PUT_TEST_DATA = [
    {"name": "Ash", "city": "Tokyo"},
    {"name": "Ash Ketchum", "city": "Pallet Town"}
]

PATCH_TEST_DATA = [
    {"name": "Ash"},
    {"city": "Tokyo"}
]
```
### ‚ö° –§–∏–∫—Å—Ç—É—Ä–∞ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```python
@pytest.fixture
def cleanup_trainer_data(api_client, trainer_id):
    original_response = api_client.get('/trainers', params={'trainer_id': trainer_id})
    original_data = original_response.json()["data"][0]
    
    yield
    
    restore_data = {
        "name": original_data.get("trainer_name", "Ash"),
        "city": original_data.get("city", "Tokyo")
    }
    api_client.put('/trainers', json=restore_data)
```
---
## üéâ –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–ú–∞–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç ZimQA** ‚ú®
**Happy testing! üéØüêçüöÄ**
